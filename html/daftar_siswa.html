<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daftar Siswa</title>
    <link rel="stylesheet" href="../css/daftar_siswa.css">
    <link rel="stylesheet" href="../css/visimisi.css">
    <link rel="stylesheet" href="../footer/footer/footer.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">

    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <a href="#" class="plant">SMKN 24 JAKARTA</a>
        <div class="menu-btn"></div>
        <div class="navigation">
            <div class="navigation-items">
                <a href="home.html">Home</a>
                    <div class="dropdown">
                            <a href="#">Profil</a>
                            <div class="dropdown-content">
                                <a href="visimisi.html">Visi Misi</a>
                            </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Kesiswaan</a>
                        <div class="dropdown-content">
                            <a href="prestasi.html">Prestasi peserta didik</a>
                            <a href="eskul.html">Ekstrakurikuler</a>
                            <a href="daftar_siswa.html">Daftar siswa</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Sarpras</a>
                        <div class="dropdown-content">
                            <a href="fasilitas_umum.html">Fasilitas</a>
                            <a href="fasilitas_jurusan.html">Ruang praktik</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Hubin</a>
                        <div class="dropdown-content">
                            <a href="kemitraan.html">Kemitraan</a>
                            <a href="penelusuran_tamatan.html">Penelusuran tamatan</a>
                            <a href="lulus_ptn.html">Lulus PTN</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Kurikulum</a>
                        <div class="dropdown-content">
                            <a href="jurusan.html">Kejuruan</a>
                            <a href="daftar_guru.html">Daftar guru</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Info</a>
                        <div class="dropdown-content">
                            <a href="kegiatan.html">Kegiatan</a>
                            <a href="doegram.html">Doegram</a>
                        </div>
                    </div>
                    <a href="contact.html">Contact</a>
            </div>
        </div>
    </header>
    <section class="courses" id="courses">
        <h1 class="heading">DAFTAR SISWA</h1>
        <div class="box-container">
            <div class="col-5">
                <div id="scroll-container" class="scroll-container">
                    <!-- Buttons will be generated here -->
                </div>
                <div>
                    <p id="kelas-nama">Kelas: </p>
                    <p id="kelas-walas">Wali Kelas: </p>
                </div>
                <table id="student-table" class="custom-table">
                    <thead>
                        <tr>
                            <th>NIS</th>
                            <th>NISN</th>
                            <th>Nama</th>
                            <th>Jenis Kelamin</th>
                            <!-- <th>Tempat Lahir</th>
                            <th>Tanggal Lahir</th> -->
                            <th>Agama</th>
                        </tr>
                    </thead>
                    <tbody id="daftar-siswa-body">
                        <!-- Student data will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>
    </section>

        <!-- mulai footer -->
        <footer>
            <div class="kontainer">
                <div class="sec aboutus">
                    <h2>About Us</h2>
                    <p>SMK Negeri 24 Jakarta</p>
                    <p>Jl. Bambu Hitam No.3, RT.3/RW.1, Bambu Apus, Kec. Cipayung, </p>
                    <p>Kota Jakarta Timur, Daerah Khusus Ibukota Jakarta 13890.</p>
                    <ul class="sci">
                        <li><a href="#"><i class="fa-brands fa-facebook-f"></i></a></li>
                        <li><a href="#"><i class="fa-brands fa-instagram"></i></a></li>
                        <li><a href="#"><i class="fa-brands fa-youtube"></i></a></li>
                    </ul>
                </div>
                <div class="sec contact">
                    <h2>Contact Us</h2>
                    <ul class="ket">
                        <li>
                            <span><i class="fa-solid fa-phone"></i></span>
                            <p><a href="tel:0218441976">(021) 8441976</a></p>
                        </li>
                        <li>
                            <span><i class="fa-solid fa-envelope"></i></span>
                            <p><a href="mailto:smk24jakarta@gmail.com">smk24jakarta@gmail.com</a></p>
                        </li>
                    </ul>
                </div>
            </div>
        </footer>
        <div class="copyrightText">
            <p>Copyright 2024 SMK Negeri 24 Jakarta. All Right Reserved.</p>
        </div>
     <!-- selesai footer -->
     <script>
        document.addEventListener("DOMContentLoaded", function() {
        const scrollContainer = document.getElementById("scroll-container");
        const kelasNama = document.getElementById("kelas-nama");
        const kelasWalas = document.getElementById("kelas-walas");
        const daftarSiswaBody = document.getElementById("daftar-siswa-body");

        // Fetch data from the API to get the list of classes
        fetch('http://127.0.0.1:8000/api/kelas')
            .then(response => response.json())
            .then(data => {
                if (data.status) {
                    // Populate custom-btn buttons
                    data.data.forEach(kelas => {
                        const button = document.createElement("a");
                        button.href = "#";
                        button.className = "custom-btn";
                        button.innerText = kelas.nama_kelas;
                        button.addEventListener("click", function(event) {
                            event.preventDefault();
                            // Display Kelas Info
                            kelasNama.innerText = `Kelas: ${kelas.nama_kelas}`;
                            // Fetch and Display Kelas Info including the teacher
                            fetchKelasDetail(kelas.id);
                            // Set the clicked button as active
                            document.querySelectorAll('.custom-btn').forEach(btn => btn.classList.remove('active'));
                            button.classList.add('active');
                        });
                        scrollContainer.appendChild(button);
                    });
                    // Load default data for ID 1
                    fetchKelasDetail(1);
                }
            })
            .catch(error => console.error('Error fetching data:', error));

        function fetchKelasDetail(kelasId) {
            // Fetch data for the selected class to get the teacher and student list
            fetch(`http://127.0.0.1:8000/api/kelas/${kelasId}`)
                .then(response => response.json())
                .then(data => {
                    if (data.status) {
                        const kelasDetail = data.data;
                        kelasWalas.innerText = `Wali Kelas: ${kelasDetail.walas.nama}`;
                        // Populate the Daftar Siswa table
                        daftarSiswaBody.innerHTML = ''; // Clear previous data
                        kelasDetail.daftar_siswa.forEach(siswa => {
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${siswa.nis}</td>
                                <td>${siswa.nisn}</td>
                                <td>${siswa.nama}</td>
                                <td>${siswa.jenis_kelamin}</td>
                                <td>${siswa.agama}</td>
                            `;
                            daftarSiswaBody.appendChild(row);
                        });
                    }
                })
                .catch(error => console.error('Error fetching class details:', error));
        }
    });
    </script>
</body>
</html>
